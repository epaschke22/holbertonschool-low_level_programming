This project has examples of how to compile a dynamic library in C.